# 브라우저 렌더링 순서

<br>

### 파싱(parsing)

-  프로그래밍 언어로 작성된 파일을 실행시키기 위해 구문 분석(syntax analysis)을 하는 단계
-  파일의 문자열들을 문법적 의미를 갖는 최소 단위인 '토큰'으로 분해하고, 이 토큰들을 문법적 의미와 구조에 따라 노드라는 요소로 만든다. 노드들은 상하관계를 반영해 트리를 형성하는데, 이 트리를 파스트리라고 한다.

### 렌더링

-  HTML, CSS, JavaScript 파일을 파싱해, 브라우저에 시각적으로 출력하는 과정

### DNS (Domain Name System Servers)

-  '도메인 이름 시스템 서버'는 URL들의 이름과 IP주소를 저장하고 있는 데이터베이스로, 웹사이트를 위한 주소록이라고 생각하면 된다.
-  숫자로 된 IP주소(ex. 63.245.217.105) 대신 사용자가 사용하기 편리하도록 주소를 매핑해주는 역할을 한다.

### TCP/IP (Transmission Control Protocol / Internet Protocol)

-  '전송제어규약'과 '인터넷규약'은 데이터가 어떻게 웹을 건너 여행하는지 정의하는 통신 규약이다.
-  이를 사용하겠다는 것은, IP주소 체계를 따르며 TCP의 특성을 활용해 송신자와 수신자의 논리적 연결을 생성하고 신뢰성을 유지할 수 있도록 하겠다는 의미이다.
-  즉, 송신자가 수신자에게 IP주소를 사용해서 데이터를 전달하고 그 데이터가 제대로 갔는지에 대해 이야기하는 것이다.

### HTTP (Hypertext Transfer Protocol)

-  클라이언트와 서버가 서로 통신할 수 있게 하기 위한 언어를 정의하는 어플리케이션 규약으로, 쉽게 말해 요청과 응답으로 이루어져있어 "어떤 데이터 주세요"라고 요청하면, "이 데이터 줄게요" 라고 응답하는 것이라고 할 수 있다.
-  주로 HTML 문서를 주고 받는데에 사용된다.

### 렌더링 전체 과정

1. HTML 파싱: 웹 브라우저는 서버로부터 받은 HTML 문서를 파싱하여 DOM (Document Object Model) 트리를 생성한다. DOM 트리는 HTML 문서의 구조와 내용을 나타내는 모델
2. CSS 파싱: 동시에 외부 CSS 파일과 내장 스타일 시트를 파싱하여 CSSOM (CSS Object Model) 트리를 생성한다.
3. 렌더 트리 생성: DOM 트리와 CSSOM 트리는 결합되어 렌더 트리(render tree)를 형성한다. 이때, 화면에 실제로 그려지지 않는 요소들(ex: display: none 속성을 가진 요소 등)은 렌더 트리에서 제외된다.
4. 레이아웃(Reflow): 각 요소의 크기와 위치가 계산되는 단계. 이 단계에서 화면에 어디에 어떻게 배치될지 결정하며, 이 정보는 각 노드의 "박스" 정보로 저장된다.
5. 페인팅(Paint): 최종적으로 요소들이 화면에 그려진다. 이 단계에서 색상, 이미지, 글꼴 등의 시각적 스타일이 적용되며, GPU가 관여하는 경우도 많다.
6. 합성(Compositing): 여러 개의 레이어(layer)가 합쳐져 최종적으로 사용자에게 보여진다.

### www.google.com을 주소창에서 입력하면 일어나는 일

1. 도메인을 찾는다.

   -  로컬 DNS 캐시에 저장된 DNS정보를 확인하고, 캐시에 정보가 없으면 DNS 서버를 통해 www.google.co.kr의 IP주소를 요청한다.
   -  Root domain - Top levle .... 이런식으로 넘어가서 질의를 보내 IP주소를 반환받는다.

2. 기업에서 서버는 분산 환경으로 구축되어있다.

   -  서버는 데이터센터나, 클라우드를 이용해 전세계에 걸친 분산된 환경을 구축한다.

   -  왜 서버를 전세계에 걸쳐 분산된 환경으로 구성할까?

      -  지연시간 감소: 사용자는 가까운 서버와 통신할 수 있다 - 웹페이지 로딩 속도를 향상시키고, 사용자 경험이 개선된다.
      -  높은 가용성과 안전성: 전세계에 서버가 분산되어 있으면, 하나의 서버/데이터센터에 문제가 발생해도, 다른 서버를 통해 서비스를 계속 제공할 수 있다.

   -  기업은 분산환경을 구축하고, 당연히 여러대의 서버 컴퓨터가 존재할 텐데 그럼 도메인 질의시 받는 IP가 가까운 서버였던 걸까?
      -  분산 환경의 서버들이 도메인을 공유하기 때문에 여러 IP 주소가 발생할 것이고, DNS 서버는 사용자와 가장 가까운 서버의 IP주소를 반환하며 지연시간을 줄일 수 있는 것

3. 웹 서버와 웹 애플리케이션 서버

   -  웹 서버는 웹 애플리케이션을 호스팅하고, 사용자의 요청을 처리하는데 필요한 기능을 제공한다. 정적페이지를 반환한다.
   -  웹 애플리케이션서버는 동적 정보를 반환한다.
      웹 서버, 웹 애플리케이션 서버, 로드밸런서 등 환경에 따라 다르겠지만 요청에 따른 응답데이터를 생성해 요청을 보낸 IP주소로 반환한다 정도로 이해하면 된다.

4. 브라우저에서 화면 렌더링

   -  SSR방식: 서버에서 이미 완성된 화면을 가져옴
      HTML 해석해 DOM트리 구성, CSS로 스타일 적용, JS 실행해 동적인 요소 처리하며 화면 구성

   -  CSR방식: 브라우저에서 웹 페이지를 완전히 렌더링한다는 특징
      초기 HTML문서와 JS를 실행, Reac t애플리케이션 초기화, 브라우저에서 DOM 생성및 조작, 이후 필요한 데이터를 백엔드 서버에 API 요청해 가져옴, 클라이언트에서 데이터를 처리하고 렌더링 진행
